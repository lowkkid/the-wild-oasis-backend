databaseChangeLog:
  - changeSet:
      id: createBookingsTable
      author: Vladislav Shikunov
      changes:
        - sql:
            sql: |
              CREATE TABLE bookings (
                id SERIAL PRIMARY KEY,
                start_date TIMESTAMP NOT NULL,
                end_date TIMESTAMP NOT NULL,
                num_nights SMALLINT NOT NULL,
                num_guests SMALLINT NOT NULL,
                cabin_price NUMERIC(7,2) NOT NULL,
                extras_price NUMERIC(7,2) DEFAULT 0,
                total_price NUMERIC(7,2) NOT NULL,
                status VARCHAR(255) NOT NULL,
                has_breakfast BOOLEAN NOT NULL,
                is_paid BOOLEAN NOT NULL,
                paid_at TIMESTAMP,
                observations TEXT,
                cabin_id INTEGER NOT NULL,
                guest_id INTEGER NOT NULL,
                created_at TIMESTAMP DEFAULT now(),

                CONSTRAINT fk_bookings_cabin 
                    FOREIGN KEY (cabin_id) REFERENCES cabins(id),
                CONSTRAINT fk_bookings_guest 
                    FOREIGN KEY (guest_id) REFERENCES guests(id)
              );
